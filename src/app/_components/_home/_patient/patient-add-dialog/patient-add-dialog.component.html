<div class="container">
  <h3 mat-dialog-title>Add Patient</h3>

  <form autocomplete="off" class="mat-dialog-content" [formGroup]="addForm">

    <mat-accordion>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Personal Data
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div>
          <mat-form-field>
            <input matInput type="number" placeholder="Code" formControlName="code">
            <mat-error *ngIf="errorHandling('code', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Name" formControlName="name">
            <mat-error *ngIf="errorHandling('name', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-margin">
          <label>Marital Status: </label>
          <mat-radio-group formControlName="maritalStatus">
            <mat-radio-button value="Single">Single</mat-radio-button>
            <mat-radio-button value="Married">Married</mat-radio-button>
          </mat-radio-group>
        </div>


        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Phone 1" formControlName="phone1">
            <mat-error *ngIf="errorHandling('phone1', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Phone 2" formControlName="phone2">
            <mat-error *ngIf="errorHandling('phone2', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <mat-label>Occupation</mat-label>
            <mat-select formControlName="occupationId">
              <mat-option *ngFor="let occupation of data.occupations" [value]="occupation.id">
                {{occupation.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="errorHandling('occupationId', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <mat-label>Know us through</mat-label>
            <mat-select formControlName="knowingId">
              <mat-option *ngFor="let knowing of data.knowings" [value]="knowing.id">
                {{knowing.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="errorHandling('knowingId', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput formControlName="birthday" [matDatepicker]="pickerBirthday" placeholder="Birthday">
            <mat-datepicker-toggle matSuffix [for]="pickerBirthday">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #pickerBirthday></mat-datepicker>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Residence" formControlName="residence">
            <mat-error *ngIf="errorHandling('residence', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

      </mat-expansion-panel>

      <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Husband Data
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Name" formControlName="husbandName">
            <mat-error *ngIf="errorHandling('name', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>


        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Phone " formControlName="husbandPhone">
            <mat-error *ngIf="errorHandling('husbandPhone', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <mat-label>Occupation</mat-label>
            <mat-select formControlName="husbandOccupationId">
              <mat-option *ngFor="let occupation of data.occupations" [value]="occupation.id">
                {{occupation.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="errorHandling('husbandOccupationId', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>


        <div>
          <mat-form-field>
            <input matInput formControlName="husbandBirthday" [matDatepicker]="pickerHusbandBirthday" placeholder="Birthday">
            <mat-datepicker-toggle matSuffix [for]="pickerHusbandBirthday">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #pickerHusbandBirthday></mat-datepicker>
          </mat-form-field>
        </div>


      </mat-expansion-panel>

      <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            General Data
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Blood Group" formControlName="bloodGroup">
            <mat-error *ngIf="errorHandling('bloodGroup', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="BMI" formControlName="bmi">
            <mat-error *ngIf="errorHandling('bmi', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Children" formControlName="children">
            <mat-error *ngIf="errorHandling('children', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Weight" formControlName="weight">
            <mat-error *ngIf="errorHandling('weight', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

        <div>
          <mat-form-field>
            <input matInput type="text" placeholder="Smoking" formControlName="smoking">
            <mat-error *ngIf="errorHandling('smoking', 'required')">
              This field is required
            </mat-error>
          </mat-form-field>
        </div>

      </mat-expansion-panel>

    </mat-accordion>

    <div mat-dialog-actions>
      <button mat-raised-button color="primary" type="submit" (click)="save()" [disabled]="!addForm.valid">Save</button>
      <button mat-raised-button color="warn" (click)="cancel()" tabindex="-1">Cancel</button>
    </div>

  </form>
</div>
